{% extends "layout.html" %}

{% block main %}

    <div class="alert alert-info my-2" role="alert">
        Be sure to check out the <a href="/data_structure">data</a> webpage to get a hold of the variables and read the following section to understand how to input your query!
    </div>

    <div class="accordion" id="accordion">
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                    aria-expanded="true" aria-controls="collapseOne">
                    Which variables are available?
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordion">
                <div class="accordion-body">
                    Due to the nature of some of the set's variables and the scope of this project, some of the variables shown
                    in the <a href="/data_structure">data section</a> have been omitted for the time being; nonetheless, there are
                    still variables available for you to take a look at.
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    What does the second field in the form mean?
                </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordion">
                <div class="accordion-body">
                    In addition to the graph generated to provide you with a visualization of what the distribution of the variables look like,
                    you might find interesting or even insightful to see what one of the two very basic descriptive statistics tells you about the
                    information you'll be able to plot.
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Is there any way of knowing the query used to extract information?
                </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordion">
                <div class="accordion-body">
                    Yes! Once you sent your query and the data has been filtered and processed you will be able to see at the bottom a button
                    to see the query that was generated automatically.
                </div>
            </div>
        </div>
    </div>
    <hr class="border border-primary border-3 opacity-75">
    <p class="fs-4">Note: the results have been limited to the top 50 due to space restrictions while plotting.</p>
    <form class="mb-3" action="/query" method="post">
        <div class="mb-3">
            <label for="var" class="form-label">Variable</label>
            <select class="form-select form-select-sm" id="var" name="var" aria-label=".form-select-sm example">
                <option selected>Open this select menu</option>
                {% for var in vars %}
                    <option value="{{ var[0] }}">{{ var[1] }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="stat" class="form-label">Which stat do you want to analyze?</label>
            <select class="form-select form-select-sm" id="stat" name="stat" aria-label=".form-select-sm example">
                <option selected>Open this select menu</option>
                {% for stat in stats %}
                    <option value="{{ stat }}">{{ stat }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

{% endblock %}